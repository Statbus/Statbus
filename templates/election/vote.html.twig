{% extends 'base.html.twig' %}

{% block javascripts %}
	{{ parent() }}
	{{ encore_entry_script_tags('ballot') }}
{% endblock %}

{% block body %}
	<h1 class="border-bottom border-4">
		<span class="text-muted">#{{ election.getId }}</span>
		{{ election.getName }}</h1>
	{% include "election/components/info.html.twig" %}


	<div class="card">
		<h3 class="card-header">Your Ballot</h3>
		<div class="card-body d-flex gap-4 align-items-center">
			<div class="d-flex flex-column align-self-stretch text-center text-muted">
				<div class="">
					Most Preferred
					<i class="fa-solid fa-thumbs-up"></i>
				</div>
				<div class="mt-auto">
					Least Preferred
					<i class="fa-solid fa-thumbs-down"></i>
				</div>
			</div>
			<div id="ballot-container" class="flex-grow-1">
				{% for c in election.candidates %}
					<div class="alert alert-secondary d-flex align-items-center gap-2 candidate" data-candidate-id="{{ c.getId }}" data-candidate-name="{{c.getName}}" draggable="true">
						<i class="fa-solid fa-grip-vertical" style="cursor: grab"></i>
						<div>
							<strong>{{ c.name }}</strong>
							{% if c.getLink %}
								<a href="{{ c.getlink }}" target="_blank">Click here to Learn More</a>
							{% endif %}
							{% if c.getDescription %}
								<p>{{ c.getDescription }}</p>
							{% endif %}
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
		<div class="card-footer d-flex align-items-center gap-2">
			<span>Click and drag the candidates into your preferred order, from most desired at the top, to least desired at the bottom. When you're satisfied, click the Cast Ballot button to submit your vote.</span>
			<a href="#" class="btn btn-success btn-lg" style="white-space: nowrap" id="cast">Cast Ballot</a>
		</div>
	</div>

	<div class="modal fade" id="votedModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="votedModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5 text-center" id="votedModalLabel">Thank You For Voting</h1>
				</div>
				<div class="modal-body">
					<p class="mb-0">Your vote has been received. The results of this election will be available after
						{{election.getEnd|date('Y-m-d')}}</p>
				</div>
				<div class="modal-footer">
					<a href="{{path('election')}}" class="btn btn-primary btn-lg flex-grow-1">Continue</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
